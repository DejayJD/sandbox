(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{492:function(module,exports,__webpack_require__){__webpack_require__(493),__webpack_require__(654),__webpack_require__(655),__webpack_require__(855),__webpack_require__(856),__webpack_require__(860),__webpack_require__(861),__webpack_require__(858),__webpack_require__(857),__webpack_require__(862),__webpack_require__(863),module.exports=__webpack_require__(848)},565:function(module,exports){},655:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(350)},848:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(350).configure)([__webpack_require__(849),__webpack_require__(850)],module,!1)}).call(this,__webpack_require__(205)(module))},849:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=849},850:function(module,exports,__webpack_require__){var map={"./stories/StateMachines.stories.js":859};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=850},853:function(module,exports,__webpack_require__){},859:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"StateMachineForm",(function(){return StateMachineForm}));var _on2,_on3,_on5,_states,regenerator=__webpack_require__(297),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(465),slicedToArray=__webpack_require__(301),defineProperty=__webpack_require__(61),formik_esm=__webpack_require__(471),useMachine=__webpack_require__(870),Machine=__webpack_require__(871),es=__webpack_require__(129),react=__webpack_require__(0),mockAPICall=(__webpack_require__(853),function mockAPICall(){var succeedAfter=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,cancelAfter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,failAfter=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(resolve,reject){succeedAfter&&setTimeout((function(){resolve("Success")}),succeedAfter),cancelAfter&&setTimeout((function(){reject("cancelled")}),cancelAfter),failAfter&&setTimeout((function(){reject("error")}),failAfter)}))}),jsx_runtime=__webpack_require__(28),BUTTON_STATES_READY="READY",BUTTON_STATES_LOADING="LOADING",BUTTON_STATES_DISABLED="DISABLED",BUTTON_STATES_ERROR="ERROR",BUTTON_STATES_CANCELLED="CANCELLED",BUTTON_EVENTS_form={READY:"READY",NOT_READY:"NOT_READY"},BUTTON_EVENTS_api={REQUESTED:"REQUESTED",SUCCESS:"SUCCESS",CANCELLED:"CANCELLED",FAILED:"FAILED"},buttonStateMachine=Object(Machine.a)({id:"buttonStates",initial:BUTTON_STATES_DISABLED,states:(_states={},Object(defineProperty.a)(_states,BUTTON_STATES_DISABLED,{on:Object(defineProperty.a)({},BUTTON_EVENTS_form.READY,BUTTON_STATES_READY)}),Object(defineProperty.a)(_states,BUTTON_STATES_READY,{on:(_on2={},Object(defineProperty.a)(_on2,BUTTON_EVENTS_form.NOT_READY,BUTTON_STATES_DISABLED),Object(defineProperty.a)(_on2,BUTTON_EVENTS_api.REQUESTED,BUTTON_STATES_LOADING),_on2)}),Object(defineProperty.a)(_states,BUTTON_STATES_LOADING,{on:(_on3={},Object(defineProperty.a)(_on3,BUTTON_EVENTS_api.SUCCESS,BUTTON_STATES_READY),Object(defineProperty.a)(_on3,BUTTON_EVENTS_api.CANCELLED,BUTTON_STATES_CANCELLED),Object(defineProperty.a)(_on3,BUTTON_EVENTS_api.FAILED,BUTTON_STATES_ERROR),_on3)}),Object(defineProperty.a)(_states,BUTTON_STATES_ERROR,{on:Object(defineProperty.a)({},BUTTON_EVENTS_form.READY,BUTTON_STATES_READY)}),Object(defineProperty.a)(_states,BUTTON_STATES_CANCELLED,{on:(_on5={},Object(defineProperty.a)(_on5,BUTTON_EVENTS_form.NOT_READY,BUTTON_STATES_DISABLED),Object(defineProperty.a)(_on5,BUTTON_EVENTS_api.REQUESTED,BUTTON_STATES_LOADING),_on5)}),_states)}),getButtonText=function getButtonText(buttonState){switch(buttonState){case BUTTON_STATES_LOADING:return"Loading...";case BUTTON_STATES_READY:return"Submit";case BUTTON_STATES_ERROR:return"Error! Fix it pls";case BUTTON_STATES_CANCELLED:return"Someone rudely interrupted, try again?";default:return"Submit"}},initialFormValues={firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",succeedAfter:2500,cancelAfter:"",failAfter:""},validationSchema=es.a().shape({firstName:es.b().required("Required"),middleName:es.b().required("Required"),lastName:es.b().required("Required"),phoneNumber:es.b().required("Required"),email:es.b().required("Required")}),renderCount=0,StateMachinesApp_StateMachinesApp=function StateMachinesApp(){renderCount+=1;var _useMachine=Object(useMachine.b)(buttonStateMachine),_useMachine2=Object(slicedToArray.a)(_useMachine,2),buttonState=_useMachine2[0],sendButtonStateEvent=_useMachine2[1],_useState=Object(react.useState)(!1),_useState2=Object(slicedToArray.a)(_useState,2),displaySuccessMessage=_useState2[0],setDisplaySuccessMessage=_useState2[1],onSubmitHandler=function(){var _ref2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(data,_ref){var setFieldError;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setFieldError=_ref.setFieldError,_context.prev=1,sendButtonStateEvent(BUTTON_EVENTS_api.REQUESTED),_context.next=5,mockAPICall(data.succeedAfter,data.cancelAfter,data.failAfter);case 5:sendButtonStateEvent(BUTTON_EVENTS_api.SUCCESS),setDisplaySuccessMessage(!0),setTimeout((function(){setDisplaySuccessMessage(!1)}),2e3),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(1),"cancelled"===_context.t0&&sendButtonStateEvent(BUTTON_EVENTS_api.CANCELLED),"error"===_context.t0&&(setFieldError("firstName","API didnt like this value :("),sendButtonStateEvent(BUTTON_EVENTS_api.FAILED));case 14:case"end":return _context.stop()}}),_callee,null,[[1,10]])})));return function onSubmitHandler(_x,_x2){return _ref2.apply(this,arguments)}}(),_useFormik=Object(formik_esm.a)({initialValues:initialFormValues,onSubmit:onSubmitHandler,validationSchema:validationSchema,validateOnMount:!0}),handleChange=_useFormik.handleChange,handleSubmit=_useFormik.handleSubmit,values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched;return Object(react.useEffect)((function(){!function hasFormErrors(errors){return Object.keys(errors).length>0}(errors)?sendButtonStateEvent(BUTTON_EVENTS_form.READY):sendButtonStateEvent(BUTTON_EVENTS_form.NOT_READY)}),[errors,values,sendButtonStateEvent]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("form",{onSubmit:handleSubmit,className:"form-container",children:[Object(jsx_runtime.jsx)("h3",{children:" Form "}),Object(jsx_runtime.jsxs)("div",{className:"triple-input-container",children:[Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"First Name",name:"firstName",value:values.firstName,onChange:handleChange}),errors.firstName&&touched.firstName&&errors.firstName]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"Middle Name",name:"middleName",value:values.middleName,onChange:handleChange}),errors.middleName&&touched.middleName&&errors.middleName]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"Last Name",name:"lastName",value:values.lastName,onChange:handleChange}),errors.lastName&&touched.lastName&&errors.lastName]})]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"phone",placeholder:"Phone",name:"phoneNumber",maxLength:10,onChange:handleChange}),errors.phoneNumber&&touched.phoneNumber&&errors.phoneNumber]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"Email",name:"email",onChange:handleChange}),errors.email&&touched.email&&errors.email]}),Object(jsx_runtime.jsx)("button",{type:"submit",style:{background:buttonState.value===BUTTON_STATES_ERROR?"#e24e4e82":"white"},disabled:buttonState.value===BUTTON_STATES_DISABLED||buttonState.value===BUTTON_STATES_LOADING,children:getButtonText(buttonState.value)}),displaySuccessMessage&&"Success!",Object(jsx_runtime.jsx)("h3",{children:" Configure the API Response "}),Object(jsx_runtime.jsxs)("div",{className:"triple-input-container",children:[Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"number",placeholder:"Succeed After (ms)",name:"succeedAfter",value:values.succeedAfter,onChange:handleChange}),errors.succeedAfter&&touched.succeedAfter&&errors.succeedAfter]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"Cancel After (ms)",name:"cancelAfter",value:values.cancelAfter,onChange:handleChange}),errors.cancelAfter&&touched.cancelAfter&&errors.cancelAfter]}),Object(jsx_runtime.jsxs)("div",{className:"flex-col",children:[Object(jsx_runtime.jsx)("input",{type:"text",placeholder:"Fail After (ms)",name:"failAfter",value:values.failAfter,onChange:handleChange}),errors.failAfter&&touched.failAfter&&errors.failAfter]})]})]}),Object(jsx_runtime.jsxs)("h3",{children:[" Render Count: ",renderCount," "]})]})};StateMachinesApp_StateMachinesApp.__docgenInfo={description:"",methods:[],displayName:"StateMachinesApp"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/state-machines/StateMachinesApp.js"]={name:"StateMachinesApp",docgenInfo:StateMachinesApp_StateMachinesApp.__docgenInfo,path:"src/state-machines/StateMachinesApp.js"});__webpack_exports__.default={title:"StateMachines",component:StateMachinesApp_StateMachinesApp};var StateMachineForm=StateMachinesApp_StateMachinesApp},863:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(872),esm=__webpack_require__(7),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[492,2,3]]]);